"use strict";var burger=document.querySelector(".burger"),nav=document.querySelector(".nav"),closeMenuBtn=document.querySelector(".nav__close"),showBrandsBtn=document.querySelector(".nav__link-brands"),brandsContainer=document.querySelector(".nav__link-sneakers"),navLinks=document.querySelectorAll(".nav__link"),activeMenu=function(){nav.classList.add("active"),gsap.to(navLinks,{x:0,opacity:1,stagger:.1,duration:.2,ease:"power4.in"}),document.body.style.overflow="hidden",basketPage.classList.remove("appear")},closeMenu=function(){nav.classList.remove("active"),gsap.to(navLinks,{x:400,opacity:0,duration:.4,ease:"power4.in"}),document.body.style.overflow="visible",brandsContainer.classList.remove("active")},openLogosList=function(){brandsContainer.classList.toggle("active")},slides=(navLinks.forEach(function(e){e.classList.contains("nav__link-brands")||(e.addEventListener("click",closeMenu),brandsContainer.classList.remove("active"))}),showBrandsBtn.addEventListener("click",openLogosList),burger.addEventListener("click",activeMenu),closeMenuBtn.addEventListener("click",closeMenu),document.querySelectorAll(".slider__slide")),dots=document.querySelectorAll(".slider__dots-dot"),sliderTitle=document.querySelector(".thin-slider"),index=0,sliderTexts=["Prices","Brands","Quality"],slider=function(){setInterval(function(){index++,slides.forEach(function(e){e.classList.remove("active")}),dots.forEach(function(e){e.classList.remove("active")}),sliderTitle.textContent=sliderTexts[index],slides[index].classList.add("active"),dots[index].classList.add("active"),index==slides.length-1&&(index=-1)},5e3)},mainImg=(slider(),document.querySelector(".gallery__main-photo-img")),smallImages=document.querySelectorAll(".new-product__small-images-img"),mainGallery=(smallImages[0].style.opacity=".4",function(e){smallImages.forEach(function(e){e.style.opacity="1"});e=e.target;e.style.opacity=".4",mainImg.src=e.src,mainImg.classList.add("current-photo"),setTimeout(function(){mainImg.classList.remove("current-photo")},200)}),saleProducts=(smallImages.forEach(function(e){return e.addEventListener("click",mainGallery)}),gsap.registerPlugin(ScrollTrigger),gsap.fromTo(".new-product__title",{opacity:0,x:60},{opacity:1,x:0,duration:.5,ease:"power4.in",scrollTrigger:{trigger:".new-product__title"}}),gsap.fromTo(".gallery__main-photo-img",{opacity:0,y:200},{opacity:1,y:0,duration:1,ease:"bounce.out",scrollTrigger:{trigger:".gallery__main-photo-img"}}),gsap.fromTo(".new-product__small-images-img",{opacity:0,y:100,rotate:45},{opacity:1,y:0,duration:.6,rotate:0,ease:"circ.out",stagger:.2,scrollTrigger:{trigger:".new-product__small-images-img"}}),document.querySelectorAll(".sale-product")),productImgs=(gsap.fromTo(".sale__title",{opacity:0,x:60},{opacity:1,x:0,duration:.5,ease:"power4.in",scrollTrigger:{trigger:".sale__title"}}),saleProducts.forEach(function(e){gsap.fromTo(e,{opacity:0,x:-100},{opacity:1,x:0,duration:.6,ease:"circ.out",scrollTrigger:{trigger:e,start:"top 60%"}})}),document.querySelectorAll(".product-img")),modalImg=document.querySelector(".img-container__img"),modal=document.querySelector(".modal"),closeModalBtn=document.querySelector(".img-container__close"),showModalImg=function(e){modal.classList.add("active"),modalImg.src=e.target.src,modalImg.classList.add("active")},closeModal=function(){modal.classList.remove("active"),modalImg.classList.remove("active")},categoryBtns=(closeModalBtn.addEventListener("click",closeModal),productImgs.forEach(function(e){e.addEventListener("click",showModalImg)}),modal.addEventListener("click",function(e){e.target.classList.contains("img-container__img")||closeModal()}),gsap.fromTo(".hero-section__title",{opacity:0,x:60},{opacity:1,x:0,duration:.5,ease:"power4.in",scrollTrigger:{trigger:".hero-section__title"}}),gsap.fromTo(".content__text",{scale:0},{scale:1,duration:.5,ease:"elastic.inOut(1, 0.3)",delay:.5,scrollTrigger:{trigger:".content__text"}}),gsap.fromTo(".features__list",{opacity:0,x:-60},{opacity:1,x:0,duration:.5,stagger:.2,delay:.5,ease:"power4.in",scrollTrigger:{trigger:".content__text"}}),document.querySelectorAll(".shop__button")),cardsShoes=document.querySelectorAll(".shop-card"),selectByCategory=(gsap.fromTo(".shop__title",{opacity:0,x:60},{opacity:1,x:0,duration:.5,ease:"power4.in",scrollTrigger:{trigger:".shop__title"}}),function(e){categoryBtns.forEach(function(e){e.classList.remove("active")});var e=e.target,t=(e.classList.add("active"),e.dataset.name);cardsShoes.forEach(function(e){e.classList.contains(t)?e.classList.add("active"):e.style.display="none","all"===t&&e.classList.add("active"),setTimeout(function(){e.classList.contains("active")&&(e.classList.remove("active"),e.style.display="flex")},200)})}),brandsLinks=(categoryBtns.forEach(function(e){return e.addEventListener("click",selectByCategory)}),document.querySelectorAll(".nav__link-brand")),getCurrentBrand=function(e){closeMenu();var t=e.target.id;categoryBtns.forEach(function(e){e.classList.remove("active"),e.id===t&&e.classList.add("active")}),cardsShoes.forEach(function(e){e.style.display="none",e.classList.contains(t)&&(e.classList.add("active"),e.style.display="flex"),setTimeout(function(){e.classList.contains("active")&&(e.classList.remove("active"),e.style.display="flex")},200)})},basketBtn=(brandsLinks.forEach(function(e){return e.addEventListener("click",getCurrentBrand)}),gsap.fromTo(".hero-sectionV2__title",{opacity:0,x:60},{opacity:1,x:0,duration:.5,ease:"power4.in",scrollTrigger:{trigger:".hero-sectionV2__title"}}),gsap.fromTo(".hero-sectionV2__content-txt",{scale:0},{scale:1,duration:.5,ease:"elastic.inOut(1, 0.3)",delay:.5,scrollTrigger:{trigger:".hero-sectionV2__content-txt"}}),gsap.fromTo(".hero-sectionV2__list-item",{opacity:0,x:-60},{opacity:1,x:0,duration:.5,stagger:.2,delay:.5,ease:"power4.in",scrollTrigger:{trigger:".hero-sectionV2__content-txt"}}),document.querySelector(".bucket__link")),basketPage=document.querySelector(".client-bucket"),addToBasketBtns=(basketBtn.addEventListener("click",function(){basketPage.classList.toggle("appear")}),document.querySelectorAll(".btns__buy-btn")),newItemContainer=document.querySelector(".client-bucket__products-container"),totalAmmount=document.querySelector(".client-bucket__total-sum"),addedItemsNumber=document.querySelector(".bucket__icon-items"),addItemModal=document.querySelector(".add-modal"),totalSum=[0],ID=0,addItem=function(e){ID++;var e=e.target.parentElement.parentElement,t=e.children[0].src,o=e.children[1].textContent,c=e.children[2],c=parseFloat(c.querySelector(".prices__current-price").textContent),e=e.children[3].querySelector(".btns__sizes").value,a=document.createElement("div"),t=(a.classList.add("client-bucket__product"),a.id=ID,a.innerHTML='\n<img src="'.concat(t,'" alt="').concat(o,'" class="client-bucket__product-img">\n<h3 class="client-bucket__product-name">').concat(o,'</h3>\n<div class="client-bucket__product-info">\n  <p class="client-bucket__product-size">Size: <span class="client-bucket__current-size">').concat(e,'</span></p>\n  <span class="client-bucket__product-price">').concat(c,'$</span>\n</div>\n<button onclick="removeItem(').concat(ID,')" class="client-bucket__remove-product"><i class="fa-solid fa-trash-can"></i>Remove</button>\n</div>\n'),newItemContainer.appendChild(a),totalSum.push(c),addedItemsNumber.textContent=totalSum.length-1,totalSum.reduce(function(e,t){return e+t},0));totalAmmount.textContent="".concat(t,"$"),addItemModal.classList.add("active"),setTimeout(function(){addItemModal.classList.remove("active")},1e3)},closeBasketPageBtn=(addToBasketBtns.forEach(function(e){return e.addEventListener("click",addItem)}),document.querySelector(".client-bucket__close ").addEventListener("click",function(){basketPage.classList.remove("appear")})),removeItem=function(e){var e=document.getElementById(e),t=e.children[2].querySelector(".client-bucket__product-price"),t=parseFloat(t.textContent),t=totalSum.indexOf(t),t=(totalSum.splice(t,1),addedItemsNumber.textContent=totalSum.length-1,totalSum.reduce(function(e,t){return e+t},0));totalAmmount.textContent="".concat(t,"$"),e.remove()};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJidXJnZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJuYXYiLCJjbG9zZU1lbnVCdG4iLCJzaG93QnJhbmRzQnRuIiwiYnJhbmRzQ29udGFpbmVyIiwiYWN0aXZlTWVudSIsImFkZCIsImNsYXNzTGlzdCIsImdzYXAiLCJ0byIsIngiLCJvcGFjaXR5Iiwic3RhZ2dlciIsImR1cmF0aW9uIiwiYm9keSIsInN0eWxlIiwib3ZlcmZsb3ciLCJjbG9zZU1lbnUiLCJyZW1vdmUiLCJlYXNlIiwibmF2TGlua3MiLCJ0b2dnbGUiLCJmb3JFYWNoIiwibGluayIsImNvbnRhaW5zIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9wZW5Mb2dvc0xpc3QiLCJkb3RzIiwic2xpZGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImluZGV4Iiwic2V0SW50ZXJ2YWwiLCJzbGlkZXJUZXh0cyIsInNsaWRlIiwiZG90Iiwic2xpZGVyVGl0bGUiLCJ0ZXh0Q29udGVudCIsIm1haW5JbWciLCJzbGlkZXIiLCJzbWFsbEltYWdlcyIsImUiLCJpbWciLCJjbGlja2VkUGhvdG8iLCJzcmMiLCJzZXRUaW1lb3V0Iiwic2FsZVByb2R1Y3RzIiwibWFpbkdhbGxlcnkiLCJmcm9tVG8iLCJTY3JvbGxUcmlnZ2VyIiwic2Nyb2xsVHJpZ2dlciIsInRyaWdnZXIiLCJ5Iiwicm90YXRlIiwicHJvZHVjdEltZ3MiLCJzdGFydCIsInNob2UiLCJtb2RhbEltZyIsIm1vZGFsIiwiY2xvc2VNb2RhbEJ0biIsInNob3dNb2RhbEltZyIsInRhcmdldCIsImNsb3NlTW9kYWwiLCJjYXJkIiwiZGVsYXkiLCJzY2FsZSIsImNhdGVnb3J5QnRucyIsImNhcmRzU2hvZXMiLCJzZWxlY3RCeUNhdGVnb3J5IiwiYnRuIiwic2VsZWN0ZWQiLCJkaXNwbGF5IiwiYnJhbmRzTGlua3MiLCJnZXRDdXJyZW50QnJhbmQiLCJjdXJyZW50QnJhbmQiLCJkYXRhc2V0IiwibmFtZSIsInNlbGVjdGVkQ2F0ZWdvcnkiLCJpZCIsInRvdGFsQW1tb3VudCIsImJhc2tldEJ0biIsImJhc2tldFBhZ2UiLCJhZGRUb0Jhc2tldEJ0bnMiLCJuZXdJdGVtQ29udGFpbmVyIiwiYWRkZWRJdGVtc051bWJlciIsImFkZEl0ZW1Nb2RhbCIsInRvdGFsU3VtIiwicHJvZHVjdENhcmQiLCJpdGVtUHJpY2UiLCJpdGVtU2l6ZSIsImFkZGVkSXRlbUNhcmQiLCJ0b3RhbEFtbW91bnRUb1BheSIsInJlbW92ZUl0ZW0iLCJJRCIsIml0ZW1Ub1JlbW92ZSIsInByaWNlVG9SZW1vdmUiLCJpbmRleFRvUmVtb3ZlIiwibGVuZ3RoIiwicmVkdWNlIiwiaXRlbU5hbWUiLCJjaGlsZHJlbiIsInByaWNlcyIsInZhbHVlIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImNvbmNhdCIsIml0ZW1JbWciLCJhcHBlbmRDaGlsZCIsInB1c2giLCJhIiwiYiIsImNsb3NlQmFza2V0UGFnZUJ0biIsImFkZEl0ZW0iLCJnZXRFbGVtZW50QnlJZCIsInBhcnNlRmxvYXQiLCJpbmRleE9mIiwic3BsaWNlIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFBQSxPQUFBQyxTQUFBQyxjQUFBLFdBRU1GLElBQU1DLFNBQVdDLGNBQVIsUUFDVEMsYUFBZUQsU0FBQUEsY0FBckIsZUFDTUUsY0FBZUgsU0FBU0MsY0FBYyxxQkFDdENHLGdCQUFnQkosU0FBU0MsY0FBYyx1QkFDdkNJLFNBQUFBLFNBQWtCTCxpQkFBU0MsY0FHM0JLLFdBQWEsV0FBbkJKLElBQU1JLFVBQVVDLElBQUcsVUFDakJMLEtBQUlNLEdBQUFBLFNBQWMsQ0FDbEJDLEVBQUtDLEVBQ0hDLFFBRGdCLEVBRWhCQyxRQUFTLEdBQ1RDLFNBQVMsR0FDVEMsS0FBQUEsY0FKZ0JkLFNBQWxCZSxLQUFBQyxNQUFBQyxTQUFBLFNBT0FqQixXQUFTZSxVQUFXRSxPQUFwQixXQUlJQyxVQUFZLFdBQWxCaEIsSUFBTWdCLFVBQVlDLE9BQUEsVUFDaEJqQixLQUFJTSxHQUFBQSxTQUFVVyxDQUFkUixFQUFxQixJQUFBQyxRQUFyQixFQUFBRSxTQUFBLEdBQUFNLEtBQUEsY0FDQVgsU0FBUVksS0FBQUEsTUFBVUosU0FBQSxVQUFFTixnQkFBRkgsVUFBQVcsT0FBQSxXQUFxQ0MsY0FBTSxXQUEzQ2YsZ0JBQWxCRyxVQUFBYyxPQUFBLFdBaUJGbEIsUUFkQ2lCLFNBTERFLFFBQUEsU0FBQUMsR0FZTUEsRUFBS2hCLFVBQVVpQixTQUFTLHNCQUw5QkQsRUFBQUUsaUJBQUEsUUFBQVIsV0FTRWIsZ0JBQWdCRyxVQUFVVyxPQUFPLGFBSC9CZixjQUFBc0IsaUJBQUEsUUFBQUMsZUFDRDVCLE9BQUEyQixpQkFBQSxRQUFBcEIsWUFPSEgsYUFBYXVCLGlCQUFpQixRQUFTUixXQUZ6QlEsU0FBQUEsaUJBQTBCQyxtQkFDbENDLEtBQUNGLFNBQUFBLGlCQUEwQnBCLHFCQUNqQ0gsWUFBYXVCLFNBQWJ6QixjQUF1Q2lCLGdCQUlqQ1csTUFBTSxFQUNORCxZQUFnQkUsQ0FBQUEsU0FBQUEsU0FBaUIsV0FHbkNDLE9BQUosV0FDQUMsWUFBTUMsV0FJRkYsUUFERkMsT0FBQUEsUUFBWSxTQUFBRSxHQUNWSCxFQUFLdkIsVUFBQVcsT0FBQSxZQUlKUyxLQUZETCxRQUFBLFNBQUFZLEdBSUFQLEVBQUtMLFVBQVFKLE9BQUNnQixZQUViQyxZQUZEQyxZQUFBSixZQUFBRixPQUdBSyxPQUFBQSxPQUFZQyxVQUFaOUIsSUFBMEIwQixVQUMxQkosS0FBQUEsT0FBTXJCLFVBQVFBLElBQVVELFVBQ3BCd0IsT0FBUXZCLE9BQUFBLE9BQWMsSUFFeEJ1QixPQUFTLElBQVRBLE1BU0FPLFNBTkxDLFNBTWV2QyxTQUFTQyxjQUFjLDZCQUNqQ3VDLFlBQWN4QyxTQUFTOEIsaUJBQWlCLGtDQUs1Q1UsYUFIRkEsWUFBWSxHQUFHeEIsTUFBTUosUUFBVSxLQUdqQlcsU0FBWmtCLEdBQ0VDLFlBQVU5QixRQUFWLFNBQUE4QixHQURGQSxFQUFBMUIsTUFBQUosUUFBQSxNQUlBK0IsRUFBbUIvQixFQUFBQSxPQUNuQjBCLEVBQUF0QixNQUFjMkIsUUFBYUMsS0FFM0JOLFFBQVE5QixJQUFBQSxFQUFjb0MsSUFFcEJOLFFBQUFBLFVBQVE5QixJQUFVVyxpQkFDbkIwQixXQUZELFdBVEZQLFFBQUE5QixVQUFBVyxPQUFBLGtCQVdLLE9BOERHMkIsY0EzRFlOLFlBQXBCakIsUUFBQSxTQUFBbUIsR0FBQSxPQUFBQSxFQUFBaEIsaUJBQUEsUUFBQXFCLGVBSUF0QyxLQUFLdUMsZUFDSEMsZUFDY3RDLEtBQUdxQyxPQUZuQixzQkFJSXBDLENBQUFBLFFBREYsRUFBQUQsRUFBQSxJQUVFQSxDQUNBRyxRQUFVLEVBQ1ZNLEVBQUksRUFDSjhCLFNBQUFBLEdBQ0VDLEtBQUFBLFlBRGFELGNBQUEsQ0FSbkJDLFFBQUEseUJBa0JJdkMsS0FBQUEsT0FDQXdDLDJCQUNBdEMsQ0FBQUEsUUFIRixFQUFBc0MsRUFBQSxLQUlFaEMsQ0FDQThCLFFBQUFBLEVBQ0VDLEVBQUFBLEVBRGFyQyxTQUFBLEVBUm5CTSxLQUFBLGFBY0k4QixjQUNGLENBQ0V0QyxRQUFGLDhCQUdFd0MsS0FBR0osT0FDSGxDLGlDQUNBdUMsQ0FBQUEsUUFKRixFQUFBRCxFQUFBLElBQUFDLE9BQUEsSUFLRWpDLENBQ0FQLFFBQVMsRUFDVHFDLEVBQUFBLEVBQ0VDLFNBQVMsR0FESUUsT0FBQSxFQU1uQmpDLEtBQUEsV0FQSVAsUUFBUyxHQVNQaUMsY0FBZTlDLENBRWhCZ0QsUUFDSCxvQ0FFQWhELFNBQUE4QixpQkFBQSxrQkEwQ0Z3QixhQXBDTUgsS0FBQUEsT0FEYSxlQVJuQixDQUFBdkMsUUFBQSxFQUFBRCxFQUFBLElBY0FtQyxDQUNFckMsUUFBQSxFQUVJRyxFQUFBQSxFQUFZRCxTQUFJLEdBRnBCUyxLQUdFLFlBQ0VSLGNBREYsQ0FFR3VDLFFBRkgsa0JBT0lJLGFBQU9oQyxRQUFBLFNBQUFpQyxHQUZNL0MsS0FBQXVDLE9BUm5CUSxFQWdCRixDQUFBNUMsUUFBQSxFQUFBRCxHQUFBLEtBYkksQ0FlRTJDLFFBQVcsRUFDWEcsRUFBQUEsRUFDQUMsU0FBUTFELEdBQ1IyRCxLQUFBQSxXQWJBVCxjQUFlLENBZWZVLFFBQVlKLEVBQ1ZoRCxNQUFBQSxlQU1SUixTQUFBOEIsaUJBQUEsaUJBWE0yQixTQUFXekQsU0FBU0MsY0FBYyx1QkFnQnhDMEQsTUFBY2pDLFNBQUFBLGNBQWlCLFVBQy9CNEIsY0FBb0J0RCxTQUFDMEMsY0FBUSx5QkFBN0JrQixhQUFBLFNBQUFuQixHQUlBaUIsTUFBTWhDLFVBQUFBLElBQU4sVUFFSStCLFNBQUFiLElBQUFILEVBQUFvQixPQUFBakIsSUFDRGEsU0FBTWpELFVBQUFELElBQUEsV0FLVHVELFdBQUEsV0FqQkVKLE1BQU1sRCxVQUFVVyxPQUFPLFVBbUJ6QlYsU0FBQUQsVUFDRVcsT0FBQSxXQXlFSTRDLGNBeEVKSixjQUNBakMsaUJBQUEsUUFBQW9DLFlBQ0VsRCxZQURGVyxRQUFBLFNBQUFtQixHQUVFL0IsRUFGRmUsaUJBQUEsUUFBQWtDLGdCQUtFVixNQUFBQSxpQkFBZSxRQUFBLFNBQUFULEdBQ2JVLEVBQUFBLE9BQVMzQyxVQUFBaUIsU0FBQSx1QkFLWHFDLGVBT0FFLEtBQUFBLE9BQ0FkLHVCQUNFQyxDQUFBQSxRQUFTLEVBQUF4QyxFQUFBLElBREksQ0FSbkJDLFFBQUEsRUFjSUQsRUFBQ3FDLEVBRURwQyxTQUFGLEdBQWVRLEtBQUcsWUFDbEI4QixjQUFBLENBQ0V0QyxRQURGLDBCQU1FUSxLQUFBQSxPQUNBOEIsaUJBQ0VDLENBQUFBLE1BQU8sR0FETSxDQU1uQmMsTUFBQSxFQXpCSW5ELFNBQVUsR0EyQlJvRCxLQUFBQSx3QkFDQUMsTUFBQUEsR0FFRmpCLGNBQ0YsQ0FDRXRDLFFBQUYsb0JBSUVFLEtBQUFBLE9BQ0FNLGtCQUNBOEIsQ0FBQUEsUUFBQUEsRUFBYXZDLEdBQUUsSUFDYndDLENBRGF2QyxRQUFBLEVBUm5CRCxFQUFBLEVBZklHLFNBQVUsR0E2QlJzRCxRQUFBQSxHQUNKRixNQUFBQSxHQUNFRyxLQUFJN0QsWUFETjBDLGNBQUEsQ0FHTW9CLFFBQVEsb0JBT0NDLFNBQVV6QyxpQkFBckIsa0JBQ0RxQyxXQUFBbkUsU0FBQThCLGlCQUFBLGNBY2dCc0Msa0JBYmpCM0QsS0FBQXVDLE9BQ0VlLGVBQ0QsQ0FBQW5ELFFBQUEsRUFBQUQsRUFBQSxJQTFCSCxDQTRCRWtDLFFBQUFBLEVBQ0VsQyxFQUFBLEVBQ0VvRCxTQUFLdkQsR0FDTHVELEtBQUFBLFlBQ0RiLGNBQUEsQ0FKT0MsUUFBVixrQkFTOEJ6QixTQUFBQSxHQUFsQ3dDLGFBQUEzQyxRQUFBLFNBQUE4QyxHQUVNRyxFQUFBQSxVQUFjeEUsT0FBQUEsWUFFcEIsSUFBTXlFLEVBQWVoQyxFQUFBb0IsT0FFYmEsR0FETnhELEVBQVNWLFVBQUFELElBQUEsVUFDY3NELEVBQXZCYyxRQUFBQyxNQUVBVixXQUFBQSxRQUFhM0MsU0FBYndDLEdBQ012RCxFQUFBQSxVQUFVVyxTQUFPMEQsR0ExQm5CZCxFQUFLdkQsVUFBVUQsSUFBSSxVQTRCbkI4RCxFQUFJN0QsTUFBQUEsUUFBYyxPQUh0QixRQUFBcUUsR0FPQVYsRUFBQUEsVUFBbUI1RCxJQUFBLFVBRWpCc0MsV0FBU3JDLFdBQ0h1RCxFQUFDdkQsVUFBY2lCLFNBQW5CLFlBQ0FzQyxFQUFLL0MsVUFBTXVELE9BQVUsVUFDdEJSLEVBQUEvQyxNQUFBdUQsUUFBQSxTQUVEMUIsU0FQRjJCLGFBV0tOLGFBQUEzQyxRQUFBLFNBQUE4QyxHQUFBLE9BQUFBLEVBQUEzQyxpQkFBQSxRQUFBMEMsb0JBWExwRSxTQUFBOEIsaUJBQUEscUJBWEkyQyxnQkFBa0IsU0FBQ2hDLEdBMkJ6QitCLFlBQW9CLElBQUFFLEVBQWVoRCxFQUFBQSxPQUFpQm9ELEdBdkJsRFosYUFBYTNDLFFBQVEsU0FBQzhDLEdBMkJwQkEsRUFBQ3JCLFVBQ0g3QixPQUFBLFVBQ0VQLEVBQUZrRSxLQUFBSixHQUFpQkwsRUFBQTdELFVBQUFELElBQUEsWUFJZk8sV0FBVVMsUUFIWixTQUFBd0MsR0FJRTNDLEVBQU1KLE1BQUF1RCxRQUpSLE9BS0VyQixFQUFBQSxVQUFlekIsU0FBQWlELEtBQ2J2QixFQUFPM0MsVUFBRUQsSUFBQSxVQURJd0QsRUFBQS9DLE1BQUF1RCxRQUFBLFFBUWZOLFdBQU8sV0FDVEYsRUFBQXZELFVBQUFpQixTQUFBLFlBQ09zQyxFQURQdkQsVUFBQVcsT0FBQSxVQUVFTCxFQUFVRSxNQUZadUQsUUFBQSxTQUlPLFFBNEVQUSxXQWhGQVAsWUFIRmpELFFBQUEsU0FBQUMsR0FBQSxPQUFBQSxFQUFBRSxpQkFBQSxRQUFBK0MsbUJBZ0JFaEUsS0FDQXVDLE9BQ0VwQyx5QkFDQUQsQ0FBQ0MsUUFGSCxFQUFBRCxFQUFBLElBR0VHLENBQ0FELFFBQVMsRUFDVG1ELEVBQUssRUFDTDVDLFNBQU0sR0FDTjhCLEtBQUFBLFlBQ0VDLGNBQVMsQ0FESUEsUUFBQSw0QkFVbkI2QixLQUFBQSxPQUNFQywrQkFERixDQUlBaEIsTUFBQSxHQW5DRSxDQXFDSWlCLE1BQUFBLEVBQ0FDLFNBQUFBLEdBR0FKLEtBQUFBLHdCQUNBSyxNQUFBQSxHQUNBQyxjQUFlckYsQ0FDakJzRixRQUFXLGtDQUtiN0UsS0FBQXVDLE9BQ0EsNkJBQ0EsQ0FBQXBDLFFBQWEsRUFBRzJFLEdBQUFBLElBQ2hCLENBQ0EzRSxRQUFZLEVBQ1pELEVBQU02RSxFQUdOMUUsU0FBY3lFLEdBQ2QxRSxRQUFNNEUsR0FFTnpCLE1BQU0wQixHQUNOQSxLQUFBQSxZQUNBQSxjQUFBLENBQ0FBLFFBQWEsa0NBaUJBckQsU0FBYnBDLGNBQThCMEYsa0JBQzlCTixXQUFhN0UsU0FBYlAsY0FBQSxrQkFPc0JpRixpQkFMdEJyQyxVQUFBQSxpQkFBaUIsUUFBQSxXQUNmd0MsV0FBQUEsVUFBYTdFLE9BQVVXLFlBSVVPLFNBQWlCSSxpQkFBOUIsbUJBRXhCcUQsaUJBQUFuRixTQUFBQyxjQW5ERSxzQ0F3REVnRixhQUFXekUsU0FBaUJQLGNBQTVCLDZCQUdKbUYsaUJBQUFwRixTQUFBQyxjQUFBLHVCQXZETW9GLGFBQWVyRixTQUFTQyxjQUFjLGNBeUR0QzJGLFNBQVUsQ0FBQSxHQUNkQyxHQUFNQyxFQUlBQyxRQUFBQSxTQUFBQSxHQUNORixLQUNBUCxJQUNBRixFQURBM0MsRUFBZ0J1RCxPQUNDM0QsY0FBdUI0RCxjQUNsQ04sRUFBQUEsRUFBb0JMLFNBQVNZLEdBQU90RCxJQUN4Q3VELEVBQUFaLEVBQUFhLFNBQUEsR0FBQS9ELFlBREZnRSxFQUFBZCxFQUFBYSxTQUFBLEdBR0FyQixFQUFhMUMsV0FFYnlELEVBQUFBLGNBQUEsMEJBQUF6RCxhQXhETW9ELEVBRFFGLEVBQVlhLFNBQVMsR0FDWm5HLGNBQWMsZ0JBQWdCcUcsTUFFL0NaLEVBQWdCMUYsU0FBU3VHLGNBQWMsT0FnQnZDWixHQWZORCxFQUFjbEYsVUFBVUQsSUFBSSwwQkFDNUJtRixFQUFjWixHQUFLZSxHQUNuQkgsRUFBY2MsVUFBZCxlQUFBQyxPQUNVQyxFQURWLFdBQUFELE9BQzJCTixFQUQzQixtRkFBQU0sT0FFd0NOLEVBRnhDLCtJQUFBTSxPQUl5RmhCLEVBSnpGLDhEQUFBZ0IsT0FLNkNqQixFQUw3QyxrREFBQWlCLE9BTzRCWixHQVA1QiwyR0FVQVYsaUJBQWlCd0IsWUFBWWpCLEdBQzdCSixTQUFTc0IsS0FBS3BCLEdBQ2RKLGlCQUFpQi9DLFlBQWNpRCxTQUFTVyxPQUFTLEVBQ3ZCWCxTQUFTWSxPQUFPLFNBQUNXLEVBQUdDLEdBQzVDLE9BQU9ELEVBQUlDLEdBQ1YsSUFFSC9CLGFBQWExQyxZQUFiLEdBQUFvRSxPQUE4QmQsRUFBOUIsS0FDQU4sYUFBYTdFLFVBQVVELElBQUksVUFFM0JzQyxXQUFXLFdBQ1R3QyxhQUFhN0UsVUFBVVcsT0FBTyxXQUM3QixNQU9DNEYsb0JBSk43QixnQkFBZ0IzRCxRQUFRLFNBQUM4QyxHQUFELE9BQVNBLEVBQUkzQyxpQkFBaUIsUUFBU3NGLFdBSXBDaEgsU0FDeEJDLGNBQWMsMEJBQ2R5QixpQkFBaUIsUUFBUyxXQUN6QnVELFdBQVd6RSxVQUFVVyxPQUFPLGFBSzFCeUUsV0FBYSxTQUFDZCxHQUNsQixJQUFNZ0IsRUFBZTlGLFNBQVNpSCxlQUFlbkMsR0FDdkNVLEVBQVlNLEVBQWFNLFNBQVMsR0FBR25HLGNBQ3pDLGlDQUVJOEYsRUFBZ0JtQixXQUFXMUIsRUFBVW5ELGFBQ3JDMkQsRUFBZ0JWLFNBQVM2QixRQUFRcEIsR0FHakNKLEdBRk5MLFNBQVM4QixPQUFPcEIsRUFBZSxHQUMvQlosaUJBQWlCL0MsWUFBY2lELFNBQVNXLE9BQVMsRUFDdkJYLFNBQVNZLE9BQU8sU0FBQ1csRUFBR0MsR0FDNUMsT0FBT0QsRUFBSUMsR0FDVixJQUNIL0IsYUFBYTFDLFlBQWIsR0FBQW9FLE9BQThCZCxFQUE5QixLQUVBRyxFQUFhM0UiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTkFWSUdBVElPTiBGVU5DVElPTlMgSEFORExFXHJcblxyXG5jb25zdCBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlclwiKTtcclxuY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZcIik7XHJcbmNvbnN0IGNsb3NlTWVudUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19jbG9zZVwiKTtcclxuY29uc3Qgc2hvd0JyYW5kc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19saW5rLWJyYW5kc1wiKTtcclxuY29uc3QgYnJhbmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX2xpbmstc25lYWtlcnNcIik7XHJcbmNvbnN0IG5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfX2xpbmtcIik7XHJcblxyXG5jb25zdCBhY3RpdmVNZW51ID0gKCkgPT4ge1xyXG4gIG5hdi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gIGdzYXAudG8obmF2TGlua3MsIHtcclxuICAgIHg6IDAsXHJcbiAgICBvcGFjaXR5OiAxLFxyXG4gICAgc3RhZ2dlcjogMC4xLFxyXG4gICAgZHVyYXRpb246IDAuMixcclxuICAgIGVhc2U6IFwicG93ZXI0LmluXCIsXHJcbiAgfSk7XHJcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgYmFza2V0UGFnZS5jbGFzc0xpc3QucmVtb3ZlKFwiYXBwZWFyXCIpO1xyXG59O1xyXG5cclxuY29uc3QgY2xvc2VNZW51ID0gKCkgPT4ge1xyXG4gIG5hdi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gIGdzYXAudG8obmF2TGlua3MsIHsgeDogNDAwLCBvcGFjaXR5OiAwLCBkdXJhdGlvbjogMC40LCBlYXNlOiBcInBvd2VyNC5pblwiIH0pO1xyXG4gIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcInZpc2libGVcIjtcclxuICBicmFuZHNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxufTtcclxuXHJcbmNvbnN0IG9wZW5Mb2dvc0xpc3QgPSAoKSA9PiB7XHJcbiAgYnJhbmRzQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbn07XHJcblxyXG5uYXZMaW5rcy5mb3JFYWNoKChsaW5rKSA9PiB7XHJcbiAgaWYgKGxpbmsuY2xhc3NMaXN0LmNvbnRhaW5zKFwibmF2X19saW5rLWJyYW5kc1wiKSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1lbnUpO1xyXG4gIGJyYW5kc0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG59KTtcclxuXHJcbnNob3dCcmFuZHNCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Mb2dvc0xpc3QpO1xyXG5idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFjdGl2ZU1lbnUpO1xyXG5jbG9zZU1lbnVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlTWVudSk7XHJcblxyXG4vL1NMSURFUiBGVU5DVElPTlMgSEFORExFXHJcblxyXG5jb25zdCBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlcl9fc2xpZGVcIik7XHJcbmNvbnN0IGRvdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlcl9fZG90cy1kb3RcIik7XHJcbmNvbnN0IHNsaWRlclRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aGluLXNsaWRlclwiKTtcclxuXHJcbmxldCBpbmRleCA9IDA7XHJcbmNvbnN0IHNsaWRlclRleHRzID0gW1wiUHJpY2VzXCIsIFwiQnJhbmRzXCIsIFwiUXVhbGl0eVwiXTtcclxuXHJcbmNvbnN0IHNsaWRlciA9ICgpID0+IHtcclxuICBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICBpbmRleCsrO1xyXG5cclxuICAgIHNsaWRlcy5mb3JFYWNoKChzbGlkZSkgPT4ge1xyXG4gICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZG90cy5mb3JFYWNoKChkb3QpID0+IHtcclxuICAgICAgZG90LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9KTtcclxuICAgIHNsaWRlclRpdGxlLnRleHRDb250ZW50ID0gc2xpZGVyVGV4dHNbaW5kZXhdO1xyXG4gICAgc2xpZGVzW2luZGV4XS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgZG90c1tpbmRleF0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgIGlmIChpbmRleCA9PSBzbGlkZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICBpbmRleCA9IC0xO1xyXG4gICAgfVxyXG4gIH0sIDUwMDApO1xyXG59O1xyXG5cclxuc2xpZGVyKCk7XHJcblxyXG4vLyBORVcgUFJPRFVDVCBHQUxMRVJZIEhBTkRMRVxyXG5cclxuY29uc3QgbWFpbkltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fbWFpbi1waG90by1pbWdcIik7XHJcbmNvbnN0IHNtYWxsSW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uZXctcHJvZHVjdF9fc21hbGwtaW1hZ2VzLWltZ1wiKTtcclxuXHJcbnNtYWxsSW1hZ2VzWzBdLnN0eWxlLm9wYWNpdHkgPSBcIi40XCI7XHJcblxyXG5jb25zdCBtYWluR2FsbGVyeSA9IChlKSA9PiB7XHJcbiAgc21hbGxJbWFnZXMuZm9yRWFjaCgoaW1nKSA9PiB7XHJcbiAgICBpbWcuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xyXG4gIH0pO1xyXG4gIGNvbnN0IGNsaWNrZWRQaG90byA9IGUudGFyZ2V0O1xyXG4gIGNsaWNrZWRQaG90by5zdHlsZS5vcGFjaXR5ID0gXCIuNFwiO1xyXG4gIG1haW5JbWcuc3JjID0gY2xpY2tlZFBob3RvLnNyYztcclxuXHJcbiAgbWFpbkltZy5jbGFzc0xpc3QuYWRkKFwiY3VycmVudC1waG90b1wiKTtcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG1haW5JbWcuY2xhc3NMaXN0LnJlbW92ZShcImN1cnJlbnQtcGhvdG9cIik7XHJcbiAgfSwgMjAwKTtcclxufTtcclxuXHJcbnNtYWxsSW1hZ2VzLmZvckVhY2goKGltZykgPT4gaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBtYWluR2FsbGVyeSkpO1xyXG5cclxuZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyKTtcclxuXHJcbmdzYXAuZnJvbVRvKFxyXG4gIFwiLm5ldy1wcm9kdWN0X190aXRsZVwiLFxyXG4gIHsgb3BhY2l0eTogMCwgeDogNjAgfSxcclxuICB7XHJcbiAgICBvcGFjaXR5OiAxLFxyXG4gICAgeDogMCxcclxuICAgIGR1cmF0aW9uOiAwLjUsXHJcbiAgICBlYXNlOiBcInBvd2VyNC5pblwiLFxyXG4gICAgc2Nyb2xsVHJpZ2dlcjoge1xyXG4gICAgICB0cmlnZ2VyOiBcIi5uZXctcHJvZHVjdF9fdGl0bGVcIixcclxuICAgIH0sXHJcbiAgfVxyXG4pO1xyXG5cclxuZ3NhcC5mcm9tVG8oXHJcbiAgXCIuZ2FsbGVyeV9fbWFpbi1waG90by1pbWdcIixcclxuICB7IG9wYWNpdHk6IDAsIHk6IDIwMCB9LFxyXG4gIHtcclxuICAgIG9wYWNpdHk6IDEsXHJcbiAgICB5OiAwLFxyXG4gICAgZHVyYXRpb246IDEsXHJcbiAgICBlYXNlOiBcImJvdW5jZS5vdXRcIixcclxuICAgIHNjcm9sbFRyaWdnZXI6IHtcclxuICAgICAgdHJpZ2dlcjogXCIuZ2FsbGVyeV9fbWFpbi1waG90by1pbWdcIixcclxuICAgIH0sXHJcbiAgfVxyXG4pO1xyXG5cclxuZ3NhcC5mcm9tVG8oXHJcbiAgXCIubmV3LXByb2R1Y3RfX3NtYWxsLWltYWdlcy1pbWdcIixcclxuICB7IG9wYWNpdHk6IDAsIHk6IDEwMCwgcm90YXRlOiA0NSB9LFxyXG4gIHtcclxuICAgIG9wYWNpdHk6IDEsXHJcbiAgICB5OiAwLFxyXG4gICAgZHVyYXRpb246IDAuNixcclxuICAgIHJvdGF0ZTogMCxcclxuICAgIGVhc2U6IFwiY2lyYy5vdXRcIixcclxuICAgIHN0YWdnZXI6IDAuMixcclxuICAgIHNjcm9sbFRyaWdnZXI6IHtcclxuICAgICAgdHJpZ2dlcjogXCIubmV3LXByb2R1Y3RfX3NtYWxsLWltYWdlcy1pbWdcIixcclxuICAgIH0sXHJcbiAgfVxyXG4pO1xyXG5cclxuLy8gU0FMRSBTRUNUSU9OIEhBTkRMRVxyXG5cclxuY29uc3Qgc2FsZVByb2R1Y3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zYWxlLXByb2R1Y3RcIik7XHJcblxyXG5nc2FwLmZyb21UbyhcclxuICBcIi5zYWxlX190aXRsZVwiLFxyXG4gIHsgb3BhY2l0eTogMCwgeDogNjAgfSxcclxuICB7XHJcbiAgICBvcGFjaXR5OiAxLFxyXG4gICAgeDogMCxcclxuICAgIGR1cmF0aW9uOiAwLjUsXHJcbiAgICBlYXNlOiBcInBvd2VyNC5pblwiLFxyXG4gICAgc2Nyb2xsVHJpZ2dlcjoge1xyXG4gICAgICB0cmlnZ2VyOiBcIi5zYWxlX190aXRsZVwiLFxyXG4gICAgfSxcclxuICB9XHJcbik7XHJcblxyXG5zYWxlUHJvZHVjdHMuZm9yRWFjaCgoc2hvZSkgPT4ge1xyXG4gIGdzYXAuZnJvbVRvKFxyXG4gICAgc2hvZSxcclxuICAgIHsgb3BhY2l0eTogMCwgeDogLTEwMCB9LFxyXG4gICAge1xyXG4gICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICB4OiAwLFxyXG4gICAgICBkdXJhdGlvbjogMC42LFxyXG4gICAgICBlYXNlOiBcImNpcmMub3V0XCIsXHJcbiAgICAgIHNjcm9sbFRyaWdnZXI6IHtcclxuICAgICAgICB0cmlnZ2VyOiBzaG9lLFxyXG4gICAgICAgIHN0YXJ0OiBcInRvcCA2MCVcIixcclxuICAgICAgfSxcclxuICAgIH1cclxuICApO1xyXG59KTtcclxuXHJcbi8vIFNBTEUgTU9EQUwgQU5JQU1USU9OXHJcblxyXG5jb25zdCBwcm9kdWN0SW1ncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvZHVjdC1pbWdcIik7XHJcbmNvbnN0IG1vZGFsSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWctY29udGFpbmVyX19pbWdcIik7XHJcbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcclxuY29uc3QgY2xvc2VNb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1nLWNvbnRhaW5lcl9fY2xvc2VcIik7XHJcblxyXG5jb25zdCBzaG93TW9kYWxJbWcgPSAoZSkgPT4ge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcblxyXG4gIG1vZGFsSW1nLnNyYyA9IGUudGFyZ2V0LnNyYztcclxuICBtb2RhbEltZy5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG59O1xyXG5cclxuY29uc3QgY2xvc2VNb2RhbCA9ICgpID0+IHtcclxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gIG1vZGFsSW1nLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbn07XHJcblxyXG5jbG9zZU1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1vZGFsKTtcclxucHJvZHVjdEltZ3MuZm9yRWFjaCgoaW1nKSA9PiB7XHJcbiAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93TW9kYWxJbWcpO1xyXG59KTtcclxuXHJcbm1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJpbWctY29udGFpbmVyX19pbWdcIikpIHtcclxuICAgIHJldHVybjtcclxuICB9IGVsc2Uge1xyXG4gICAgY2xvc2VNb2RhbCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBIRVJPIFNFQ1RJT04gQU5JTUFUSU9OIEhBTkRMRVxyXG5cclxuZ3NhcC5mcm9tVG8oXHJcbiAgXCIuaGVyby1zZWN0aW9uX190aXRsZVwiLFxyXG4gIHsgb3BhY2l0eTogMCwgeDogNjAgfSxcclxuICB7XHJcbiAgICBvcGFjaXR5OiAxLFxyXG4gICAgeDogMCxcclxuICAgIGR1cmF0aW9uOiAwLjUsXHJcbiAgICBlYXNlOiBcInBvd2VyNC5pblwiLFxyXG4gICAgc2Nyb2xsVHJpZ2dlcjoge1xyXG4gICAgICB0cmlnZ2VyOiBcIi5oZXJvLXNlY3Rpb25fX3RpdGxlXCIsXHJcbiAgICB9LFxyXG4gIH1cclxuKTtcclxuXHJcbmdzYXAuZnJvbVRvKFxyXG4gIFwiLmNvbnRlbnRfX3RleHRcIixcclxuICB7IHNjYWxlOiAwIH0sXHJcbiAge1xyXG4gICAgc2NhbGU6IDEsXHJcbiAgICBkdXJhdGlvbjogMC41LFxyXG4gICAgZWFzZTogXCJlbGFzdGljLmluT3V0KDEsIDAuMylcIixcclxuICAgIGRlbGF5OiAwLjUsXHJcbiAgICBzY3JvbGxUcmlnZ2VyOiB7XHJcbiAgICAgIHRyaWdnZXI6IFwiLmNvbnRlbnRfX3RleHRcIixcclxuICAgIH0sXHJcbiAgfVxyXG4pO1xyXG5cclxuZ3NhcC5mcm9tVG8oXHJcbiAgXCIuZmVhdHVyZXNfX2xpc3RcIixcclxuICB7IG9wYWNpdHk6IDAsIHg6IC02MCB9LFxyXG4gIHtcclxuICAgIG9wYWNpdHk6IDEsXHJcbiAgICB4OiAwLFxyXG4gICAgZHVyYXRpb246IDAuNSxcclxuICAgIHN0YWdnZXI6IDAuMixcclxuICAgIGRlbGF5OiAwLjUsXHJcbiAgICBlYXNlOiBcInBvd2VyNC5pblwiLFxyXG4gICAgc2Nyb2xsVHJpZ2dlcjoge1xyXG4gICAgICB0cmlnZ2VyOiBcIi5jb250ZW50X190ZXh0XCIsXHJcbiAgICB9LFxyXG4gIH1cclxuKTtcclxuXHJcbi8vIFNIT1AgU0VDVElPTiBIQU5ETEVcclxuXHJcbmNvbnN0IGNhdGVnb3J5QnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2hvcF9fYnV0dG9uXCIpO1xyXG5jb25zdCBjYXJkc1Nob2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaG9wLWNhcmRcIik7XHJcblxyXG5nc2FwLmZyb21UbyhcclxuICBcIi5zaG9wX190aXRsZVwiLFxyXG4gIHsgb3BhY2l0eTogMCwgeDogNjAgfSxcclxuICB7XHJcbiAgICBvcGFjaXR5OiAxLFxyXG4gICAgeDogMCxcclxuICAgIGR1cmF0aW9uOiAwLjUsXHJcbiAgICBlYXNlOiBcInBvd2VyNC5pblwiLFxyXG4gICAgc2Nyb2xsVHJpZ2dlcjoge1xyXG4gICAgICB0cmlnZ2VyOiBcIi5zaG9wX190aXRsZVwiLFxyXG4gICAgfSxcclxuICB9XHJcbik7XHJcblxyXG5jb25zdCBzZWxlY3RCeUNhdGVnb3J5ID0gKGUpID0+IHtcclxuICBjYXRlZ29yeUJ0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcbiAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICB9KTtcclxuICBjb25zdCBzZWxlY3RlZCA9IGUudGFyZ2V0O1xyXG4gIHNlbGVjdGVkLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgY29uc3Qgc2VsZWN0ZWRDYXRlZ29yeSA9IHNlbGVjdGVkLmRhdGFzZXQubmFtZTtcclxuICBjYXJkc1Nob2VzLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RlZENhdGVnb3J5KSkge1xyXG4gICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjYXJkLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuICAgIGlmIChzZWxlY3RlZENhdGVnb3J5ID09PSBcImFsbFwiKSB7XHJcbiAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIGNhcmQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICB9XHJcbiAgICB9LCAyMDApO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY2F0ZWdvcnlCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxlY3RCeUNhdGVnb3J5KSk7XHJcblxyXG5jb25zdCBicmFuZHNMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2X19saW5rLWJyYW5kXCIpO1xyXG5cclxuY29uc3QgZ2V0Q3VycmVudEJyYW5kID0gKGUpID0+IHtcclxuICBjbG9zZU1lbnUoKTtcclxuICBjb25zdCBjdXJyZW50QnJhbmQgPSBlLnRhcmdldC5pZDtcclxuXHJcbiAgY2F0ZWdvcnlCdG5zLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICBpZiAoYnRuLmlkID09PSBjdXJyZW50QnJhbmQpIHtcclxuICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNhcmRzU2hvZXMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gICAgY2FyZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoY3VycmVudEJyYW5kKSkge1xyXG4gICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgIGNhcmQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcclxuICAgICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgY2FyZC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgIH1cclxuICAgIH0sIDIwMCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5icmFuZHNMaW5rcy5mb3JFYWNoKChsaW5rKSA9PiBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZXRDdXJyZW50QnJhbmQpKTtcclxuXHJcbi8vIEhFUk8gU0VDVElPTiBWMiBBTklNQVRJT04gSEFORExFXHJcblxyXG5nc2FwLmZyb21UbyhcclxuICBcIi5oZXJvLXNlY3Rpb25WMl9fdGl0bGVcIixcclxuICB7IG9wYWNpdHk6IDAsIHg6IDYwIH0sXHJcbiAge1xyXG4gICAgb3BhY2l0eTogMSxcclxuICAgIHg6IDAsXHJcbiAgICBkdXJhdGlvbjogMC41LFxyXG4gICAgZWFzZTogXCJwb3dlcjQuaW5cIixcclxuICAgIHNjcm9sbFRyaWdnZXI6IHtcclxuICAgICAgdHJpZ2dlcjogXCIuaGVyby1zZWN0aW9uVjJfX3RpdGxlXCIsXHJcbiAgICB9LFxyXG4gIH1cclxuKTtcclxuXHJcbmdzYXAuZnJvbVRvKFxyXG4gIFwiLmhlcm8tc2VjdGlvblYyX19jb250ZW50LXR4dFwiLFxyXG4gIHsgc2NhbGU6IDAgfSxcclxuICB7XHJcbiAgICBzY2FsZTogMSxcclxuICAgIGR1cmF0aW9uOiAwLjUsXHJcbiAgICBlYXNlOiBcImVsYXN0aWMuaW5PdXQoMSwgMC4zKVwiLFxyXG4gICAgZGVsYXk6IDAuNSxcclxuICAgIHNjcm9sbFRyaWdnZXI6IHtcclxuICAgICAgdHJpZ2dlcjogXCIuaGVyby1zZWN0aW9uVjJfX2NvbnRlbnQtdHh0XCIsXHJcbiAgICB9LFxyXG4gIH1cclxuKTtcclxuXHJcbmdzYXAuZnJvbVRvKFxyXG4gIFwiLmhlcm8tc2VjdGlvblYyX19saXN0LWl0ZW1cIixcclxuICB7IG9wYWNpdHk6IDAsIHg6IC02MCB9LFxyXG4gIHtcclxuICAgIG9wYWNpdHk6IDEsXHJcbiAgICB4OiAwLFxyXG4gICAgZHVyYXRpb246IDAuNSxcclxuICAgIHN0YWdnZXI6IDAuMixcclxuICAgIGRlbGF5OiAwLjUsXHJcbiAgICBlYXNlOiBcInBvd2VyNC5pblwiLFxyXG4gICAgc2Nyb2xsVHJpZ2dlcjoge1xyXG4gICAgICB0cmlnZ2VyOiBcIi5oZXJvLXNlY3Rpb25WMl9fY29udGVudC10eHRcIixcclxuICAgIH0sXHJcbiAgfVxyXG4pO1xyXG5cclxuLy8gQkFTS0VUIEhBTkRMRVxyXG5cclxuY29uc3QgYmFza2V0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idWNrZXRfX2xpbmtcIik7XHJcbmNvbnN0IGJhc2tldFBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsaWVudC1idWNrZXRcIik7XHJcbmJhc2tldEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGJhc2tldFBhZ2UuY2xhc3NMaXN0LnRvZ2dsZShcImFwcGVhclwiKTtcclxufSk7XHJcblxyXG4vLyBBREQgSVRFTSBUTyBCQVNLRVQgSEFORExFXHJcblxyXG5jb25zdCBhZGRUb0Jhc2tldEJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ0bnNfX2J1eS1idG5cIik7XHJcbmNvbnN0IG5ld0l0ZW1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmNsaWVudC1idWNrZXRfX3Byb2R1Y3RzLWNvbnRhaW5lclwiXHJcbik7XHJcbmNvbnN0IHRvdGFsQW1tb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xpZW50LWJ1Y2tldF9fdG90YWwtc3VtXCIpO1xyXG5jb25zdCBhZGRlZEl0ZW1zTnVtYmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idWNrZXRfX2ljb24taXRlbXNcIik7XHJcbmNvbnN0IGFkZEl0ZW1Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLW1vZGFsXCIpO1xyXG5sZXQgdG90YWxTdW0gPSBbMF07XHJcbmxldCBJRCA9IDA7XHJcblxyXG5jb25zdCBhZGRJdGVtID0gKGUpID0+IHtcclxuICBJRCsrO1xyXG4gIGNvbnN0IGJ1dHRvbiA9IGUudGFyZ2V0O1xyXG4gIGNvbnN0IHByb2R1Y3RDYXJkID0gYnV0dG9uLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICBjb25zdCBpdGVtSW1nID0gcHJvZHVjdENhcmQuY2hpbGRyZW5bMF0uc3JjO1xyXG4gIGNvbnN0IGl0ZW1OYW1lID0gcHJvZHVjdENhcmQuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ7XHJcbiAgY29uc3QgcHJpY2VzID0gcHJvZHVjdENhcmQuY2hpbGRyZW5bMl07XHJcbiAgY29uc3QgaXRlbVByaWNlID0gcGFyc2VGbG9hdChcclxuICAgIHByaWNlcy5xdWVyeVNlbGVjdG9yKFwiLnByaWNlc19fY3VycmVudC1wcmljZVwiKS50ZXh0Q29udGVudFxyXG4gICk7XHJcbiAgY29uc3Qgc2l6ZXMgPSBwcm9kdWN0Q2FyZC5jaGlsZHJlblszXTtcclxuICBjb25zdCBpdGVtU2l6ZSA9IHNpemVzLnF1ZXJ5U2VsZWN0b3IoXCIuYnRuc19fc2l6ZXNcIikudmFsdWU7XHJcblxyXG4gIGNvbnN0IGFkZGVkSXRlbUNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGFkZGVkSXRlbUNhcmQuY2xhc3NMaXN0LmFkZChcImNsaWVudC1idWNrZXRfX3Byb2R1Y3RcIik7XHJcbiAgYWRkZWRJdGVtQ2FyZC5pZCA9IElEO1xyXG4gIGFkZGVkSXRlbUNhcmQuaW5uZXJIVE1MID0gYFxyXG48aW1nIHNyYz1cIiR7aXRlbUltZ31cIiBhbHQ9XCIke2l0ZW1OYW1lfVwiIGNsYXNzPVwiY2xpZW50LWJ1Y2tldF9fcHJvZHVjdC1pbWdcIj5cclxuPGgzIGNsYXNzPVwiY2xpZW50LWJ1Y2tldF9fcHJvZHVjdC1uYW1lXCI+JHtpdGVtTmFtZX08L2gzPlxyXG48ZGl2IGNsYXNzPVwiY2xpZW50LWJ1Y2tldF9fcHJvZHVjdC1pbmZvXCI+XHJcbiAgPHAgY2xhc3M9XCJjbGllbnQtYnVja2V0X19wcm9kdWN0LXNpemVcIj5TaXplOiA8c3BhbiBjbGFzcz1cImNsaWVudC1idWNrZXRfX2N1cnJlbnQtc2l6ZVwiPiR7aXRlbVNpemV9PC9zcGFuPjwvcD5cclxuICA8c3BhbiBjbGFzcz1cImNsaWVudC1idWNrZXRfX3Byb2R1Y3QtcHJpY2VcIj4ke2l0ZW1QcmljZX0kPC9zcGFuPlxyXG48L2Rpdj5cclxuPGJ1dHRvbiBvbmNsaWNrPVwicmVtb3ZlSXRlbSgke0lEfSlcIiBjbGFzcz1cImNsaWVudC1idWNrZXRfX3JlbW92ZS1wcm9kdWN0XCI+PGkgY2xhc3M9XCJmYS1zb2xpZCBmYS10cmFzaC1jYW5cIj48L2k+UmVtb3ZlPC9idXR0b24+XHJcbjwvZGl2PlxyXG5gO1xyXG4gIG5ld0l0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQoYWRkZWRJdGVtQ2FyZCk7XHJcbiAgdG90YWxTdW0ucHVzaChpdGVtUHJpY2UpO1xyXG4gIGFkZGVkSXRlbXNOdW1iZXIudGV4dENvbnRlbnQgPSB0b3RhbFN1bS5sZW5ndGggLSAxO1xyXG4gIGNvbnN0IHRvdGFsQW1tb3VudFRvUGF5ID0gdG90YWxTdW0ucmVkdWNlKChhLCBiKSA9PiB7XHJcbiAgICByZXR1cm4gYSArIGI7XHJcbiAgfSwgMCk7XHJcblxyXG4gIHRvdGFsQW1tb3VudC50ZXh0Q29udGVudCA9IGAke3RvdGFsQW1tb3VudFRvUGF5fSRgO1xyXG4gIGFkZEl0ZW1Nb2RhbC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG5cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGFkZEl0ZW1Nb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gIH0sIDEwMDApO1xyXG59O1xyXG5cclxuYWRkVG9CYXNrZXRCdG5zLmZvckVhY2goKGJ0bikgPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhZGRJdGVtKSk7XHJcblxyXG4vLyBDTE9TRSBCQVNLRVQgUEFHRVxyXG5cclxuY29uc3QgY2xvc2VCYXNrZXRQYWdlQnRuID0gZG9jdW1lbnRcclxuICAucXVlcnlTZWxlY3RvcihcIi5jbGllbnQtYnVja2V0X19jbG9zZSBcIilcclxuICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGJhc2tldFBhZ2UuY2xhc3NMaXN0LnJlbW92ZShcImFwcGVhclwiKTtcclxuICB9KTtcclxuXHJcbi8vIFJFTU9WRSBJVEVNIEZST00gQkFTS0VUXHJcblxyXG5jb25zdCByZW1vdmVJdGVtID0gKGlkKSA9PiB7XHJcbiAgY29uc3QgaXRlbVRvUmVtb3ZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gIGNvbnN0IGl0ZW1QcmljZSA9IGl0ZW1Ub1JlbW92ZS5jaGlsZHJlblsyXS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgXCIuY2xpZW50LWJ1Y2tldF9fcHJvZHVjdC1wcmljZVwiXHJcbiAgKTtcclxuICBjb25zdCBwcmljZVRvUmVtb3ZlID0gcGFyc2VGbG9hdChpdGVtUHJpY2UudGV4dENvbnRlbnQpO1xyXG4gIGNvbnN0IGluZGV4VG9SZW1vdmUgPSB0b3RhbFN1bS5pbmRleE9mKHByaWNlVG9SZW1vdmUpO1xyXG4gIHRvdGFsU3VtLnNwbGljZShpbmRleFRvUmVtb3ZlLCAxKTtcclxuICBhZGRlZEl0ZW1zTnVtYmVyLnRleHRDb250ZW50ID0gdG90YWxTdW0ubGVuZ3RoIC0gMTtcclxuICBjb25zdCB0b3RhbEFtbW91bnRUb1BheSA9IHRvdGFsU3VtLnJlZHVjZSgoYSwgYikgPT4ge1xyXG4gICAgcmV0dXJuIGEgKyBiO1xyXG4gIH0sIDApO1xyXG4gIHRvdGFsQW1tb3VudC50ZXh0Q29udGVudCA9IGAke3RvdGFsQW1tb3VudFRvUGF5fSRgO1xyXG5cclxuICBpdGVtVG9SZW1vdmUucmVtb3ZlKCk7XHJcbn07XHJcbiJdfQ==
